<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>##터치애드:맞춤분석신청##</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no">
  <link rel="stylesheet" href="touchad.css">
</head>
<body>
  <a href="#" class="site-logo">TOUCH AD</a>

  <main class="scroll-container">
    <div class="scroll-indicator">
      <div class="scroll-dot active" data-section="hero-section"></div>
      <div class="scroll-dot" data-section="usp-content"></div>
      <div class="scroll-dot" data-section="site-footer"></div>
    </div>

    <section id="hero-section" class="scroll-section">
        <video class="bg-video" autoplay muted loop playsinline preload="auto">
            <source src="intro.mp4" type="video/mp4">
        </video>
      <div class="video-overlay"></div>
      <div class="head-copy-wrapper">
        <h1 class="animate-lines">
            <span class="line uspH">내일, 원장님 병원에 방문할 사람은 얼마나 될까요?</span>
            <span class="line">이동과 소비 데이터 속에는 병원을 찾을 준비가 된 사람들이 있습니다. <span class="usp">TOUCH AD는 교통카드와 신용카드 데이터를 바탕으로<br>병원이 자연스럽게 닿을 수 있는 사람들의 이동 흐름을 분석합니다.</span></span>
            <!-- <span class="line subline">TOUCH AD는 이 데이터를 활용한 마케팅 솔루션입니다.<br><br></span> -->
            <span class="line now"><br>지금 스캔해 보세요</span>
        </h1>
        </div>

      <div class="glass-form-wrapper">
        <div class="form-indicator">
          <div class="step-dot active"></div>
          <div class="step-dot"></div>
          <div class="step-dot"></div>
        </div>
        <form id="multi-step-form" onsubmit="return false;">
          <div class="form-steps-container">

            <div class="form-step">
                <h2 class="form-section__title">기본 정보</h2>
                <div class="form-group">
                <label for="name">성함<span class="needed"> *</span></label>
                <input type="text" id="name" name="name" required placeholder="예) 장준혁">
                </div>
                <div class="form-group">
                <label for="phone">연락처<span class="needed"> *</span></label>
                <input type="tel" id="phone" name="phone" required placeholder="예) 010-1234-5678" pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}">
                </div>
                <div class="form-group">
                <label for="email">이메일</label>
                <input type="email" id="email" name="email" placeholder="doctor@sample.com">
                </div>
            </div>

            <div class="form-step">
              <h2 class="form-section__title">병원 정보</h2>
              <div class="form-group">
                <label for="hospital-name">병원이름<span class="needed"> *</span></label>
                <input type="text" id="hospital-name" name="hospital-name" placeholder="예) 브라운성형외과">
              </div>
              <div class="form-group">
                <label for="specialty">전문진료분야<span class="needed"> *</span></label>
                <select id="specialty" name="specialty" required>
                  <option value="">선택해주세요</option>
                  <option value="성형외과">성형외과</option>
                 <option value="피부과">피부과</option>
                  <option value="내과">내과</option>
                  <option value="정형외과">정형외과</option>
                  <option value="기타">기타</option>
                </select>
                <p class="form-tip">원장님의 진료 분야에 맞춰, 연관도 높은 카드 소비 데이터를 기반으로 고객 흐름을 분석합니다.</p>
              </div>
            </div>


            <div class="form-step">
              <h2 class="form-section__title">위치 정보</h2>
              <div class="form-group">
                <label for="address-base">병원 주소<span class="needed"> *</span></label>
                <div class="address-search-group">
                  <input type="text" id="address-base" class="search-input" name="address-base" required readonly placeholder="시/군/구, 읍/면/동">
                  <button type="button" class="search-button">우편번호 검색</button>
                </div>
              </div>
              <div class="form-group">
                <label for="address-detail">상세 주소<span class="needed"> *</span></label>
                <input type="text" id="address-detail" name="address-detail" required placeholder="상세 주소를 입력해주세요">
              <p class="form-tip">원장님의 병원의 위치를 중심으로, 도달 가능한 생활권 내 이동 흐름을 분석합니다.</p>
              </div>
              <div class="form-group consent">
                  <input type="checkbox" id="privacy-consent" name="privacy-consent" required>
                  <label for="privacy-consent">개인 정보 수집에 동의합니다.<span class="needed"> *</span></label>
              </div>
            </div>
          </div>
        </form>

        <div class="form-navigation">
          <button class="nav-button prev-button" style="display: none;">이전</button>
          <button class="nav-button next-button disabled">다음</button>
          <button class="nav-button submit-button" style="display: none;">제출</button>
        </div>
      </div>

    </section>

    <section id="usp-content" class="scroll-section" style="display: none;">
      </section>

    <footer class="site-footer">
      <div class="footer-container">
        <div class="footer-info-wrapper">
          <div class="footer-info--left">
            <span class="footer-info--co">한국글로벌헬스케어사업협동조합</span>
            서울 서초구 강남대로 331, 광일빌딩 20층
            02 554 2929 | kogha@polestarhc.com
            <a href="http://www.kogha.or.kr/" class="footer-link">http://www.kogha.or.kr</a>
          </div>
          <div class="footer-info--right">
            <span class="footer-info--co">(주)런커뮤니케이션즈</span>
            서울시 성동구 뚝섬로1길 25 서울숲 한라에코밸리 903호
            070 4442 3344 | srkim@runcomm.co.kr
          <a href="http://runcomm.co.kr" class="footer-link">http://runcomm.co.kr</a>
          </div>
        </div>
        <div class="footer-copyright">ⓒ 2025 KOREAN GLOBAL HEALTHCARE BUSINESS ASSOCIATION. All Right Reserved.
        </div>
      </div>
    </footer>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const formStepsContainer = document.querySelector('.form-steps-container');
      const formDots = document.querySelectorAll('.form-indicator .step-dot');
      const formSteps = document.querySelectorAll('.form-step');
      const prevButton = document.querySelector('.prev-button');
      const nextButton = document.querySelector('.next-button');
      const submitButton = document.querySelector('.submit-button');
      const nameInput = document.getElementById('name');
      const phoneInput = document.getElementById('phone');
      const hospitalNameInput = document.getElementById('hospital-name');
      const specialtySelect = document.getElementById('specialty');
      const addressBaseInput = document.getElementById('address-base');
      const addressDetailInput = document.getElementById('address-detail');
      const privacyConsentCheckbox = document.getElementById('privacy-consent');

      let currentStep = 0;
      const totalSteps = 3;

      function updateForm() {
        formStepsContainer.style.transform = `translateX(-${(currentStep * 100) / totalSteps}%)`;

        formDots.forEach((dot, index) => {
          dot.classList.toggle('active', index === currentStep);
        });

        prevButton.style.display = currentStep > 0 ? 'inline-block' : 'none';
        nextButton.style.display = currentStep < totalSteps - 1 ? 'inline-block' : 'none';
        submitButton.style.display = currentStep === totalSteps - 1 ? 'inline-block' : 'none';

        checkButtonState();
      }

      function validateStep() {
        let isValid = true;

        if (currentStep === 0) {
          if (!nameInput.value.trim() || !phoneInput.value.trim() || !phoneInput.validity.valid) {
            isValid = false;
          }
        } else if (currentStep === 1) {
          if (!hospitalNameInput.value.trim() || !specialtySelect.value.trim()) {
            isValid = false;
          }
        } else if (currentStep === 2) {
          // 우편번호 검색 기능 미구현으로 인해 주소 입력란 필수값 제외 처리
          // if (!addressBaseInput.value.trim() || !addressDetailInput.value.trim() || !privacyConsentCheckbox.checked) {
          if (!privacyConsentCheckbox.checked) {
            isValid = false;
          }
        }
        return isValid;
      }

      function checkButtonState() {
        const isStepValid = validateStep();
        const targetButton = currentStep < totalSteps - 1 ? nextButton : submitButton;

        if (isStepValid) {
          targetButton.classList.remove('disabled');
          targetButton.disabled = false;
        } else {
          targetButton.classList.add('disabled');
          targetButton.disabled = true;
        }
      }

      nextButton.addEventListener('click', () => {
        if (currentStep < totalSteps - 1 && validateStep()) {
          currentStep++;
          updateForm();
        }
      });

      prevButton.addEventListener('click', () => {
        if (currentStep > 0) {
          currentStep--;
          updateForm();
        }
      });

      // 실시간 입력 감지
      const allInputs = document.querySelectorAll('#multi-step-form input, #multi-step-form select');
      allInputs.forEach(input => {
        input.addEventListener('input', checkButtonState);
      });
      privacyConsentCheckbox.addEventListener('change', checkButtonState);


    // submitButton에 클릭 이벤트 리스너 추가
    submitButton.addEventListener('click', () => {
        // 최종 단계의 유효성 검사 통과 시
        if (validateStep()) {
            // r.html 페이지로 이동
            window.location.href = 'r.html';
        } else {
            // 유효성 검사 실패 시 경고 메시지 표시
            alert('필수 정보를 모두 입력하고 개인정보 수집에 동의해주세요.');
        }
    });


      // 이메일 도메인 입력/선택 토글
      const emailDomainInput = document.getElementById('email-domain-input');
      const emailDomainSelect = document.getElementById('email-domain-select');
      const emailDomainToggle = document.getElementById('email-domain-toggle');

      // '▼' 버튼 클릭 시 select 박스 토글
      emailDomainToggle.addEventListener('click', () => {
          emailDomainInput.style.display = 'none';
          emailDomainToggle.style.display = 'none';
          emailDomainSelect.style.display = 'block';
          emailDomainSelect.focus();
      });

      // select 박스 변경 시 input 값 갱신
      emailDomainSelect.addEventListener('change', (event) => {
          const selectedValue = event.target.value;

          if (selectedValue === 'self') {
              emailDomainInput.value = '';
          } else {
              emailDomainInput.value = selectedValue;
          }

          // UI 원복
          emailDomainSelect.style.display = 'none';
          emailDomainInput.style.display = 'block';
          emailDomainToggle.style.display = 'block';
      });


      // 초기화 시 버튼 상태 체크
      updateForm();

      /* 우측 섹션 이동 인디케이터 스크립트 */
      const mainContainer = document.querySelector('.scroll-container');
      const sections = document.querySelectorAll('.scroll-section');
      const sectionDots = document.querySelectorAll('.scroll-indicator .scroll-dot');

      function handleScrollIndicator() {
        const scrollTop = mainContainer.scrollTop;
        let currentSectionId = 'hero-section';
        sections.forEach(section => {
          const rect = section.getBoundingClientRect();
          // 뷰포트 중앙에 가장 가까운 섹션을 활성화
          if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
            currentSectionId = section.id;
          }
        });

        sectionDots.forEach(dot => {
          dot.classList.toggle('active', dot.dataset.section === currentSectionId);
        });
      }

      mainContainer.addEventListener('scroll', handleScrollIndicator);
    });
  </script>
</body>
</html>